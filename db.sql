CREATE DATABASE BOSS default character set utf8 collate utf8_general_ci;
SET NAMES utf8;
USE BOSS;


-- 會員資料;
CREATE TABLE MEMBER(
  ID VARCHAR(20) PRIMARY KEY,
  Password VARCHAR(20) NOT NULL,
  Email VARCHAR(30) NOT NULL,
  Phone VARCHAR(10) NOT NULL,
  RegDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Birth DATE,
  Gender ENUM('M', 'F', 'N'),
  Address VARCHAR(100),
  Position ENUM('S', 'A', 'C') NOT NULL
);


CREATE TABLE PRODUCT(
  ID VARCHAR(20) PRIMARY KEY,
  Password VARCHAR(20) NOT NULL,
  Email VARCHAR(30) NOT NULL,
  Phone VARCHAR(10) NOT NULL,
  RegDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Birth DATE,
  Gender ENUM('M', 'F', 'N'),
  Address VARCHAR(100),
  Position ENUM('S', 'A', 'C') NOT NULL
);

-- 商品類型;
CREATE TABLE CATAGORY(
  ID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  Name VARCHAR(10) NOT NULL UNIQUE
);

-- 訂單;
CREATE TABLE ORDER_LIST (
  ID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  Date DATETIME NOT NULL,
  Final_Cost INT(7) UNSIGNED NOT NULL,
  State ENUM('submitted', 'processed', 'delivered', 'completed'),
  CID VARCHAR(30) NOT NULL,
  DID INT(7) UNSIGNED NOT NULL,
  SID INT(7) UNSIGNED NOT NULL,
  FOREIGN KEY (CID) REFERENCES MEMBER(ID)
);

-- 購物車;
CREATE TABLE CART (
  ID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  CID VARCHAR(30) NOT NULL,
  PID INT(7) UNSIGNED NOT NULL,
  FOREIGN KEY (CID) REFERENCES MEMBER(ID)
);

-- 購物車紀錄
CREATE TABLE CART_RECORD (
  ID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  PID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,-- 這個同時也是FK 這樣寫不知道對不對
  Quantity INT(5) UNSIGNED NOT NULL 
);

-- 評論;
CREATE TABLE COMMENT (
  ID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  CID VARCHAR(30) NOT NULL,
  PID INT(7) UNSIGNED NOT NULL,
  Star INT(1) NOT NULL,
  Comment VARCHAR(100) NOT NULL,
  FOREIGN KEY (CID) REFERENCES MEMBER(ID)
)

-- 折扣
CREATE TABLE DISCOUNT (
  ID INT(7) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  Type ENUM('shipping', 'seasoning', 'event'),
  PeriodFrom DATETIME NOT NULL,
  PeriodTo DATETIME NOT NULL,
  Condition ENUM('shipping', 'seasoning'),
  Rate INT(2) NOT NULL,
  EventType ENUM('Anniversary', 'double_evelen')
)
